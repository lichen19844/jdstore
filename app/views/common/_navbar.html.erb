<!-- <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid"> -->
        <!-- Brand and toggle get grouped for better mobile display -->
        <!-- <div class="navbar-header">
            <a class="navbar-brand" href="/">JDStore </a>
        </div> -->

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

            <ul class="nav navbar-nav">
              <li class="act">
                <%= link_to("Products", products_path) %>
              </li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
              <li>
                 <%= link_to carts_path do  %>
                    购物车 <i class="fa fa-shopping-cart"> </i> ( <%= current_cart.products.count %> )
                 <% end %>
              </li>

              <% if !current_user %>
                <li><%= link_to("注册", new_user_registration_path) %> </li>
                <li><%= link_to("登入", new_user_session_path) %></li>
                 <li><%= link_to(content_tag(:i, '登入', class: 'fa fa-sign-in'), new_user_session_path) %></li>
              <% else %>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                      Hi!, <%= current_user.nickname %>
                      <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <% if current_user.admin? %>
                        <li>
                          <%= link_to("Admin 选单", admin_products_path ) %>
                        </li>
                      <% end %>

                      <li>
                        <%= link_to("个人订单列表", account_orders_path ) %>
                      </li>

                      <li> <%= link_to("登出", destroy_user_session_path, method: :delete) %> </li>
                      <li>
                         <%= link_to(content_tag(:i, '登出', class: 'fa fa-sign-out'), destroy_user_session_path, method: :delete) %>
                      </li>
                  </ul>
                </li>
              <% end %>
            </ul>
        </div> -->
        <!-- /.navbar-collapse -->
    <!-- </div> -->
    <!-- /.container-fluid -->
<!-- </nav> -->

<nav>
  <header class="main_header">
    <div class="row">
        <div class="content">

          <a class="logo" href="/"><img src="https://bucket.mlcdn.com/a/536/536349/images/bdaa22bc236c5b0810ebe8e41397e88b6dabe914.png"></a>
          <div class="mobile-toggle">
              <li class="dropdown">
                  <%= link_to("Products", products_path) %>
              </li>
              <span>B</span>
              <span>C</span>
          </div>

           <ul class="navright">
             <!-- 搜索栏 -->
             <li class="act">
               <%= form_tag(products_path, :method => "get") do %>
                <div class="cntr">
                 <i class="fa fa-line-chart fa-2x text-danger"></i>
                 <div class="cntr-innr" >
                   <label class="search">
                     <input type="text"  name="searcher" value="<%= params[:searcher] %>" placeholder="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请 输 入 搜 索 信 息">
                   </label>
                 </div>
                </div>
               <% end %>
             </li>

             <li class="dropdown">
                 <a class="dropdown-toggle" data-toggle="dropdown">分类浏览
                 <b class = "caret"></b>
               </a>
               <ul class="dropdown-menu">
                 <% Category.all.each do |category| %><!-- 这里论坛教程说用@category，但我会报错 -->
                     <li><%= link_to(category.name, products_path(category: category.name))%></li><!-- 也可以用category: category.name表达id -->
                 <% end %>
               </ul>
             </li>

              <!-- 商品页按钮 -->
              <li class="act">
                  <%= link_to products_path do  %>
                     <i class="cc BTC-alt fa-1x text-warning"></i>货币专区
                  <% end %>
              </li>

              <!-- 购物车按钮-->
              <li class="act actcart">
                  <%= link_to carts_path do  %>
                     <i class="fa fa-shopping-cart fa-2x"></i>
                     (<%= current_cart.products.count %>)
                  <% end %>
              </li>

              <!-- 用户按钮 -->
              <% if !current_user %>
              <li class="act"><%= link_to(content_tag(:i, "注册", class: 'fa fa-user-plus'), new_user_registration_path) %> </li>
              <li class="act"><%= link_to(content_tag(:i, '登入', class: 'fa fa-sign-in'), new_user_session_path) %></li>
              <% else %>
              <li class="dropdown act">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                      <i class="fa fa-smile-o fa-1x"></i>Hi!, <%= current_user.nickname %>
                      <b class="caret"></b>
                      <ul class="dropdown-menu">
                          <% if current_user.admin? %>
                          <li>
                              <%= link_to(content_tag(:i, 'Admin 选单', class: 'cc BTC fa-1x droplist'), admin_products_path, method: :get) %>
                          </li>
                          <% end %>

                          <li>
                              <!-- <%= link_to account_orders_path do  %>
                                 <i class="fa fa-home fa-1x"></i>个人订单列表
                              <% end %> -->           <!-- 另一种实现方式 -->
                              <%= link_to(content_tag(:i, '个人订单列表', class: 'fa fa-home fa-1x droplist'), account_orders_path, method: :get) %>
                          </li>

                          <li>
                              <%= link_to(content_tag(:i, '登出', class: 'fa fa-sign-out droplist'), destroy_user_session_path, method: :delete) %>
                          </li>
                      </ul>
                  </a>

              </li>
              <% end %>
          </ul>
        </div>
     </div>
  <!-- END row -->
  </header>
</nav>

<script>

// Sticky Header
$(window).scroll(function() {

    if ($(window).scrollTop() > 10) {
        $('.main_header').addClass('sticky');
    } else {
        $('.main_header').removeClass('sticky');
    }
});

// Mobile Navigation
$('.mobile-toggle').click(function() {
    if ($('.main_header').hasClass('open-nav')) {
        $('.main_header').removeClass('open-nav');
    } else {
        $('.main_header').addClass('open-nav');
    }
});

$('.main_header li a').click(function() {
    if ($('.main_header').hasClass('open-nav')) {
        $('.navigation').removeClass('open-nav');
        $('.main_header').removeClass('open-nav');
    }
});

</script>
